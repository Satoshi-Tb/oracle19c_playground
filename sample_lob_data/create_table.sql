-- テーブル作成

DROP TABLE T_LOB_HEADER CASCADE CONSTRAINTS;
DROP TABLE T_LOB_DETAIL CASCADE CONSTRAINTS;

CREATE TABLE T_LOB_HEADER (
  ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  TEXT CLOB,
  TEXT_LEN NUMBER,
  FRAGMENT_COUNT NUMBER,
  CONSTRAINT PK_T_LOB_HEADER PRIMARY KEY (ID)
);

CREATE TABLE T_LOB_DETAIL (
  ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  HEADER_ID NUMBER,
  NO NUMBER,
  FRAGMENT CLOB,
  FRAGMENT_LEN NUMBER,
  MEMO VARCHAR2(255),
  CONSTRAINT PK_T_LOB_DETAIL PRIMARY KEY (ID),
  CONSTRAINT FK_T_LOB_DETAIL_HEADER_ID FOREIGN KEY (HEADER_ID)
    REFERENCES T_LOB_HEADER (ID)
);
CREATE INDEX IDX1_T_LOB_HEADER ON T_LOB_DETAIL (HEADER_ID);

EXIT;